<%- include('../partials/html-head') %>
<link rel="stylesheet" href="/stylesheets/albums/show.css">
<%- include('../partials/nav') %>

<main>
  <h1 id="title"><%= title %></h1>
  <section id="album-details">
    <div>Album Name:</div>
    <% if (isSelf) { %>
      <div>
        <%= album.albumName %>
        <a
        href="/profiles/<%= profile._id %>/albums/<%= album._id %>/edit"
        >
        <button>Edit Album</button>
        </a>
      </div>
    <% } %>
    <div>Artist Name:</div>
    <div><%= album.artistName %></div>
    <div>Track Number:</div>
    <div><%= album.trackNo %></div>
    <div>Release Date:</div>
    <div><%= album.releaseDate %></div>
    <% if (isSelf) { %>
    <a
    href="/songs/new"
    >
      <button>Add Song</button>
    </a>
    <form id="add-song" 
    action="/profiles/<%= profile._id %>/albums/<%= album._id %>/songs" 
    method="POST"
    >
      <select name="songId">
        <% songs.forEach(song => { %>
          <option value="<%= song._id %>"><%= song.songName %></option>
        <% }) %>
      </select>
      <button type="submit">Add to Album</button>
    </form>
    <% } %>
  </section>
  <section>
    <% if (album.songs.length) { %>

      <h2>Songs:</h2>
      <% album.songs.forEach((song)=> { %>
        <table>
          <thead>
            <td>Song Name:</td>
            <td>Track Number:</td>
          </thead>
          <tbody>
            <tr><%= song.songName %></tr>
            <tr><%= song.trackNo %></tr>
          </tbody>
        </table>
      <% }) %>
      
    <% } else { %>

      <h2>No Songs Yet :/</h2>
      <% if (isSelf) { %>
        <p>Maybe add some?</p>
      <% } %>

    <% } %> 
  </section>
</main>

<%- include('../partials/footer') %>